{"version":3,"sources":["scripts/app.js"],"names":[],"mappings":";;;;;;;;;;;AASA,CAAC,UAAS,QAAT,EAAmB;AAChB;;;;;AADgB;AAMhB,QAAI,MAAM,SAAS,aAAT,CAAuB,MAAvB,CAAN;;;AANY,OAShB,CAAI,OAAJ,GAAc,GAAd,CATgB;AAUhB,QAAI,aAAJ,GAAoB,EAApB,CAVgB;AAWhB,QAAI,QAAJ,GAAe,EAAf,CAXgB;AAYhB,QAAI,gBAAJ,GAAuB,EAAvB,CAZgB;AAchB,QAAI,MAAJ,GAAa,KAAb,CAdgB;AAehB,QAAI,YAAJ,GAAmB,EAAnB,CAfgB;AAgBhB,QAAI,eAAJ,GAAsB,CAAtB;;;AAhBgB,OAmBhB,CAAI,YAAJ,GAAmB,UAAC,KAAD,EAAW;;AAE1B,YAAI,QAAQ,SAAS,cAAT,CAAwB,mBAAxB,CAAR,CAFsB;AAG1B,cAAM,IAAN,GAH0B;KAAX,CAnBH;;AAyBhB,QAAI,kBAAJ,GAAyB,UAAC,KAAD,EAAW;AAChC,YAAI,MAAM,MAAN,CAAa,SAAb,EAAwB;;AAExB,gBAAI,eAAe,EAAE,QAAQ,IAAI,YAAJ,EAAkB,OAAO,IAAI,eAAJ,EAAlD,CAFoB;AAGxB,gBAAI,aAAJ,CAAkB,IAAlB,CAAuB,YAAvB,EAHwB;AAIxB,gBAAI,gBAAJ,GAAuB,IAAI,0BAAJ,CAA+B,IAAI,aAAJ,EAAmB,IAAI,KAAJ,CAAzE;;;AAJwB,eAOxB,CAAI,QAAJ,GAAe,EAAE,QAAQ,cAAR,EAAwB,aAAa,YAAb,EAAzC,CAPwB;AAQxB,gBAAI,MAAJ,GAAa,KAAb,CARwB;AASxB,gBAAI,CAAJ,CAAM,WAAN,CAAkB,eAAlB,GATwB;SAA5B;;;AADgC,WAchC,CAAI,YAAJ,GAAmB,EAAnB,CAdgC;AAehC,YAAI,eAAJ,GAAsB,CAAtB,CAfgC;KAAX,CAzBT;;AA2ChB,QAAI,OAAJ,GAAc,KAAd;;AA3CgB,OA6ChB,CAAI,mBAAJ,GAA0B,IAAI,OAAJ,GAAc,SAAd,CA7CV;AA8ChB,QAAI,qBAAJ,GAA4B,IAAI,OAAJ,GAAc,WAAd,CA9CZ;;AAgDhB,QAAI,cAAJ,GAAqB,UAAC,KAAD,EAAW;AAC5B,YAAI,KAAJ,GAAY,IAAI,IAAJ,CAAS,MAAM,MAAN,CAAa,QAAb,CAAsB,KAAtB,CAArB,CAD4B;AAE5B,YAAI,aAAJ,GAAoB,MAAM,MAAN,CAAa,QAAb,CAAsB,UAAtB,CAFQ;AAG5B,YAAI,gBAAJ,GAAuB,IAAI,0BAAJ,CAA+B,IAAI,aAAJ,EAAmB,IAAI,KAAJ,CAAzE,CAH4B;AAI5B,YAAI,YAAJ,GAAmB,GAAC,CAAI,KAAJ,CAAU,QAAV,KAAuB,CAAvB,GAA4B,GAA7B,GAAmC,IAAI,KAAJ,CAAU,OAAV,EAAnC,GAAyD,GAAzD,GAA+D,IAAI,KAAJ,CAAU,WAAV,EAA/D,CAJS;KAAX,CAhDL;;AAuDhB,QAAI,0BAAJ,GAAiC,UAAC,UAAD,EAAa,IAAb,EAAsB;AACnD,YAAI,YAAY,WAAW,MAAX,CAAkB,UAAC,SAAD,EAAe;AAC7C,gBAAI,UAAU,OAAV,IAAqB,UAAU,OAAV,CAAkB,MAAlB,GAA2B,CAA3B,EAA8B;AACnD,oBAAI,gBAAgB,IAAI,IAAJ,CAAS,UAAU,OAAV,CAAkB,UAAU,OAAV,CAAkB,MAAlB,GAA2B,CAA3B,CAAlB,CAAgD,IAAhD,CAAzB,CAD+C;AAEnD,uBAAO,EAAE,cAAc,OAAd,OAA4B,KAAK,OAAL,EAA5B,CAAF,CAF4C;aAAvD;;AAKA,mBAAO,IAAP,CAN6C;SAAf,CAA9B;;;AAD+C,eAW5C,SAAP,CAXmD;KAAtB,CAvDjB;;AAqEhB,WAAO,gBAAP,CAAwB,oBAAxB,EAA8C,UAAC,KAAD,EAAW;AACrD,YAAI,YAAY,kBAAkB,MAAM,MAAN,CAAa,EAAb,EAAiB,IAAI,gBAAJ,CAA/C,CADiD;;AAGrD,YAAG,SAAH,EAAa;AACT,sBAAU,OAAV,GAAoB,UAAU,OAAV,IAAqB,EAArB,CADX;AAET,sBAAU,OAAV,CAAkB,IAAlB,CAAuB,EAAE,QAAQ,IAAI,KAAJ,EAAjC,EAFS;SAAb;;AAKA,YAAI,QAAJ,GAAe,EAAE,QAAQ,cAAR,EAAwB,MAAM,MAAM,MAAN,CAAa,EAAb,EAAiB,QAAQ,IAAI,KAAJ,EAAxE,CARqD;AASrD,YAAI,CAAJ,CAAM,8BAAN,CAAqC,eAArC,GATqD;;AAWrD,YAAI,gBAAJ,GAAuB,IAAI,0BAAJ,CAA+B,IAAI,aAAJ,EAAmB,IAAI,KAAJ,CAAzE,CAXqD;KAAX,CAA9C,CArEgB;;AAmFhB,WAAO,gBAAP,CAAwB,kBAAxB,EAA4C,UAAC,KAAD,EAAW;AACnD,YAAI,YAAY,kBAAkB,MAAM,MAAN,CAAa,EAAb,EAAiB,IAAI,gBAAJ,CAA/C,CAD+C;;AAGnD,YAAI,QAAJ,GAAe,EAAE,QAAQ,cAAR,EAAwB,aAAa,SAAb,EAAzC,CAHmD;AAInD,YAAI,CAAJ,CAAM,4BAAN,CAAmC,eAAnC,GAJmD;KAAX,CAA5C,CAnFgB;;AA0FhB,aAAS,iBAAT,CAA2B,EAA3B,EAA+B,UAA/B,EAA2C;AACvC,YAAI,KAAJ,CADuC;;AAGvC,aAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,cAAc,WAAW,MAAX,EAAmB,IAAI,CAAJ,EAAO,GAA5D,EAAiE;AAC7D,gBAAI,WAAW,CAAX,EAAc,EAAd,KAAqB,EAArB,EAAyB;AACzB,wBAAQ,WAAW,CAAX,CAAR,CADyB;aAA7B;SADJ;;AAMA,eAAO,KAAP,CATuC;KAA3C;;AAaA,QAAI,OAAO,QAAP,CAAgB,IAAhB,KAAyB,EAAzB,EAA6B;;;;KAAjC;;AAMA,QAAI,qBAAJ,GAA4B,YAAW;;AAEnC,YAAI,CAAC,QAAQ,GAAR,CAAY,QAAZ,EAAsB,aAAtB,CAAoC,mBAApC,EAAyD,QAAzD,EAAmE;AACpE,oBAAQ,GAAR,CAAY,QAAZ,EAAsB,aAAtB,CAAoC,mBAApC,EAAyD,IAAzD,GADoE;SAAxE;KAFwB;;;;AA7GZ,OAsHhB,CAAI,gBAAJ,CAAqB,YAArB,EAAmC,YAAW;AAC1C,gBAAQ,GAAR,CAAY,2BAAZ,EAD0C;AAE1C,aAAK,CAAL,CAAO,WAAP,CAAmB,eAAnB,GAF0C;KAAX,CAAnC;;;AAtHgB,UA4HhB,CAAO,gBAAP,CAAwB,oBAAxB,EAA8C,YAAW;;KAAX,CAA9C;;;;;;AA5HgB,UAoIhB,CAAO,gBAAP,CAAwB,wBAAxB,EAAkD,UAAS,CAAT,EAAY;;;;;;;;;;;;;;;;;;;;;;KAAZ,CAAlD;;;AApIgB,OA6JhB,CAAI,eAAJ,GAAsB,YAAW;;KAAX,CA7JN;;AAiKhB,QAAI,WAAJ,GAAkB,YAAW;;KAAX,CAjKF;CAAnB,CAAD,CAqKG,QArKH","file":"scripts/app.js","sourcesContent":["/*\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n(function(document) {\n    'use strict';\n\n    // Grab a reference to our auto-binding template\n    // and give it some initial binding values\n    // Learn more about auto-binding templates at http://goo.gl/Dx1u2g\n    var app = document.querySelector('#app');\n\n    // Sets app default base URL\n    app.baseUrl = '/';\n    app.allExcercises = [];\n    app.postData = {};\n    app.activeExcercises = [\n    ];\n    app.method = \"get\";\n    app.newExcercise = \"\";\n    app.newExcerciseBpm = 0;\n\n    //add a new excercise\n    app.addExcercise = (event) => {\n        // alert(\"add excercise!\");\n        let modal = document.getElementById(\"addExcerciseModal\");\n        modal.open();\n    };\n\n    app.addExcerciseClosed = (event) => {\n        if (event.detail.confirmed) {\n            //make a new excercise\n            let newExcercise = { \"name\": app.newExcercise, \"bpm\": app.newExcerciseBpm };\n            app.allExcercises.push(newExcercise);\n            app.activeExcercises = app.remainingExcercisesForDate(app.allExcercises, app.today);\n\n            //call api to persist\n            app.postData = { \"user\": \"Feiyang Chen\", \"excercise\": newExcercise };\n            app.method = \"put\";\n            app.$.ajaxHandler.generateRequest();\n        }\n\n        //clear input\n        app.newExcercise = \"\";\n        app.newExcerciseBpm = 0;\n    };\n\n    app.dataUrl = \"api\";\n    //app.dataUrl = \"http://localhost:3030/api\";\n    app.excerciseUpdatedUrl = app.dataUrl + \"/update\";\n    app.excerciseCompletedUrl = app.dataUrl + \"/complete\";\n\n    app.handleResponse = (event) => {\n        app.today = new Date(event.detail.response.today);\n        app.allExcercises = event.detail.response.excercises;\n        app.activeExcercises = app.remainingExcercisesForDate(app.allExcercises, app.today);\n        app.todayDisplay = (app.today.getMonth() + 1) + \"-\" + app.today.getDate() + \"-\" + app.today.getFullYear()\n    };\n\n    app.remainingExcercisesForDate = (excercises, date) => {\n        let remaining = excercises.filter((excercise) => {\n            if (excercise.history && excercise.history.length > 0) {\n                let LastExcercise = new Date(excercise.history[excercise.history.length - 1].date);\n                return !(LastExcercise.getTime() === date.getTime());\n            }\n\n            return true;\n        })\n\n        //return excercises;\n        return remaining;\n    }\n\n    window.addEventListener(\"excerciseCompleted\", (event) => {      \n        var excercise = findExcerciseById(event.detail.id, app.activeExcercises);\n        \n        if(excercise){\n            excercise.history = excercise.history || [];\n            excercise.history.push({ \"date\": app.today });\n        }\n\n        app.postData = { \"user\": \"Feiyang Chen\", \"id\": event.detail.id, \"date\": app.today };\n        app.$.ajaxHandler_excerciseCompleted.generateRequest();\n\n        app.activeExcercises = app.remainingExcercisesForDate(app.allExcercises, app.today);\n    });\n\n    window.addEventListener(\"excerciseUpdated\", (event) => {\n        let excercise = findExcerciseById(event.detail.id, app.activeExcercises);\n\n        app.postData = { \"user\": \"Feiyang Chen\", \"excercise\": excercise };\n        app.$.ajaxHandler_excerciseUpdated.generateRequest();\n    });\n\n    function findExcerciseById(id, excercises) {\n        var match;\n        \n        for (let i = 0, l = excercises && excercises.length; i < l; i++) {\n            if (excercises[i].id === id) {\n                match = excercises[i];\n            }\n        }\n        \n        return match;\n    }\n\n\n    if (window.location.port === '') {  // if production\n        // Uncomment app.baseURL below and\n        // set app.baseURL to '/your-pathname/' if running from folder in production\n        // app.baseUrl = '/polymer-starter-kit/';\n    }\n\n    app.displayInstalledToast = function() {\n        // Check to make sure caching is actually enabledâ€”it won't be in the dev environment.\n        if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n            Polymer.dom(document).querySelector('#caching-complete').show();\n        }\n    };\n\n    // Listen for template bound event to know when bindings\n    // have resolved and content has been stamped to the page\n    app.addEventListener('dom-change', function() {\n        console.log('Our app is ready to rock!');\n        this.$.ajaxHandler.generateRequest();\n    });\n\n    // See https://github.com/Polymer/polymer/issues/1381\n    window.addEventListener('WebComponentsReady', function() {\n        // imports are loaded and elements have been registered\n    });\n\n    // Main area's paper-scroll-header-panel custom condensing transformation of\n    // the appName in the middle-container and the bottom title in the bottom-container.\n    // The appName is moved to top and shrunk on condensing. The bottom sub title\n    // is shrunk to nothing on condensing.\n    window.addEventListener('paper-header-transform', function(e) {\n        //     var appName = Polymer.dom(document).querySelector('#mainToolbar .app-name');\n        //     var middleContainer = Polymer.dom(document).querySelector('#mainToolbar .middle-container');\n        //     var bottomContainer = Polymer.dom(document).querySelector('#mainToolbar .bottom-container');\n        //     var detail = e.detail;\n        //     var heightDiff = detail.height - detail.condensedHeight;\n        //     var yRatio = Math.min(1, detail.y / heightDiff);\n        //     // appName max size when condensed. The smaller the number the smaller the condensed size.\n        //     var maxMiddleScale = 0.50;\n        //     var auxHeight = heightDiff - detail.y;\n        //     var auxScale = heightDiff / (1 - maxMiddleScale);\n        //     var scaleMiddle = Math.max(maxMiddleScale, auxHeight / auxScale + maxMiddleScale);\n        //     var scaleBottom = 1 - yRatio;\n        // \n        //     // Move/translate middleContainer\n        //     Polymer.Base.transform('translate3d(0,' + yRatio * 100 + '%,0)', middleContainer);\n        // \n        //     // Scale bottomContainer and bottom sub title to nothing and back\n        //     Polymer.Base.transform('scale(' + scaleBottom + ') translateZ(0)', bottomContainer);\n        // \n        //     // Scale middleContainer appName\n        //     Polymer.Base.transform('scale(' + scaleMiddle + ') translateZ(0)', appName);\n    });\n\n    // Scroll page to top and expand header\n    app.scrollPageToTop = function() {\n        //   app.$.headerPanelMain.scrollToTop(true);\n    };\n\n    app.closeDrawer = function() {\n        // app.$.paperDrawerPanel.closeDrawer();\n    };\n\n})(document);\n"],"sourceRoot":"/source/"}